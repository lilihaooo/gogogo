#### 1. 定义

中间件就是匹配路由前和匹配路由完成后执行的一系列操作。Gin[框架](https://so.csdn.net/so/search?q=框架&spm=1001.2101.3001.7020)允许开发者在处理请求的过程中，加入自己的钩子函数（Hook）。这个钩子函数就叫中间件



#### 2.  Gin中间件的作用

中间件适合处理一些公共的业务逻辑，比如登陆认证、权限校验、数据分页、记录日志、耗时统计。

Gin中间件的作用有两个：

1. Web请求到到达我们定义的HTTP请求处理方法之前，拦截请求并进行相应处理(比如：权限验证，数据过滤等)，这个可以类比为`前置拦截器`或`前置过滤器`，
2. 在我们处理完成请求并响应客户端时，拦截响应并进行相应的处理(比如：添加统一响应部头或数据格式等)，这可以类型为`后置拦截器`或`后置过滤器`

中间件的最大作用就是拦截过滤请求，比如我们有些请求需要用户登录或者需要特定权限才能访问，这时候便可以中间件中做过滤拦截





全局中间件

```go
r.Use(MiddleWare())
{}
```



局部中间件

```go
 r.GET("/ce", MiddleWare(), func(c *gin.Context) {
```



next()

如果在中间件中调用`gin.Context`的`Next()`方法，则可以请求到达并完成业务处理后，再经过中间件后置拦截处理

```
func MyMiddleware(c *gin.Context){
    //请求前
    c.Next()
    //请求后
}
```







#### gin默认中间件

使用gin.Default()创建Gin引擎时，已经自带了Logger()、Recovery()中间件

- Logger中间件将日志写入gin.DefaultWriter。
- Recovery中间件会recover任何panic。如果有panic的话，会写入500响应码。

如果创建Gin引擎时，不想使用默认的中间件。可以使用gin.New()。但是不建议这么做。





#### c.Get 和c.MustGet

从上下文中取值, 如果返回一个返回nil 一个panics





## 自定义中间件

