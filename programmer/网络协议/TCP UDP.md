##### TCP和UDP都是属于传输层

##### 传输协议

#### TCP

连接

##### 三次握手   建立连接的过程

​	**客户端**发SYN包询问**服务端**: 能否建立连接

​	**服务端**回复SYN+ACK包给**客户端**:  同意连接

​	**客户端**发ACK包给**服务端**: 连接建立   		--->    解决网络信道不可靠问题: 有可能客户端第一次发了SYN包后由于网络阻塞问题 没有到达服务端, 一直没有收到服务端的回复, 所以客户端会重新发送SYN包, 建立连接后, 阻塞恢复, 第一个SYN包到达服务器, 服务器误认为客户端又请求再建立一个连接, 这时服务看来是两个连接, 客户端看来是一个连接, 造成状态不一致. 三次握手目的: **在不可靠的信道上建立可靠的连接**



经过三次握手客户端和服务端都进入到了数据的传输状态

##### 传输 

利用报文(序列号, 长度, 数据内容)来保证丢包问题, 和乱序问题



##### 四次挥手

客户端和服务端都可以发起关闭连接的请求



**客户端**发送FIN包给**服务端**: 表示要关闭连接 客户端进入到 **终止等待1状态**

**服务端**回复ACK包给**客户端**:  服务端接收到关闭信号, 向客户端发送未发送完的数据, **服务端**进入到**关闭等待状态**  客户端进入到**终止等待2状态**

**服务端**将数据发送完后, **给客户端**发送FIN包

**客户端**发ACK包给**服务端**   服务端收到后立刻断开连接



目的: **在不可靠的网络链路中, 进行可靠的连接断开**





#### TCP应用场景:

稳定可靠: 发邮件, 传文件, 浏览网页







#### UDP

非连接

将数据包装后 直接从网卡发送出去就完了, 数据包之间没有状态上的联系, 性能损耗少, 内存资源占用小于tcp, 稳定性差, 容易丢包





#### UDP应用场景:

速度快, 容易丢包

实时性高, 但是对少量丢包没有要求的场景:   语音通话, 视频直播, 域名查询

隧道网络: VPN VXLAN

